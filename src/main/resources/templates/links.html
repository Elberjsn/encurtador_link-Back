<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Links - Encurtador</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex">
    <!-- Menu lateral -->
    <aside class="w-64 bg-white shadow-md h-screen p-4 space-y-4">
      <h2 class="text-2xl font-bold text-center text-blue-600">Menu</h2>
      <nav class="flex flex-col space-y-2">
        <a href="dash.html" class="p-2 rounded hover:bg-blue-100">Início</a>
        <a
          href="links.html"
          class="p-2 rounded hover:bg-blue-100 bg-blue-100 font-semibold"
          >Links</a
        >
        <a href="#" class="p-2 rounded hover:bg-blue-100">Configuração</a>
      </nav>
    </aside>

    <!-- Conteúdo principal -->
    <main class="flex-1 p-6">
      <!-- Navbar -->
      <div class="bg-white shadow p-4 mb-6 rounded">
        <h1 class="text-center text-3xl font-bold text-blue-600">Links</h1>
      </div>

      <!-- Lista de Links -->
      <div class="bg-white p-6 rounded shadow">
        <h2 class="text-xl font-bold mb-4">Seus Links</h2>
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="bg-gray-100">
              <th class="p-2 border-b">Nome</th>
              <th class="p-2 border-b">URL_Original</th>
              <th class="p-2 border-b">Encurtado</th>
              <th class="p-2 border-b">Cliques</th>
              <th class="p-2 border-b text-center">Ações</th>
            </tr>
          </thead>
          <tbody id="link-list">
            <tr class="hover:bg-gray-50">
              <td class="p-2 border-b">link1</td>
              <td class="p-2 border-b text-blue-600 underline">
                https://exemplo.com
              </td>
              <td class="p-2 border-b">meulink</td>

              <td class="p-2 border-b">125</td>
              <td class="p-2 border-b text-center space-x-2">
                <button
                  class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500"
                  onclick="editarLinha(this)"
                >
                  Editar
                </button>
                <button
                  class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
                >
                  Excluir
                </button>
              </td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="p-2 border-b">link2</td>
              <td class="p-2 border-b text-blue-600 underline">
                https://sitelegal.com
              </td>
              <td class="p-2 border-b">sitelegal</td>
              <td class="p-2 border-b">82</td>
              <td class="p-2 border-b text-center space-x-2">
                <button
                  class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500"
                  onclick="editarLinha(this)"
                >
                  Editar
                </button>
                <button
                  class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
                >
                  Excluir
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>

    <script>
      function editarLinha(botao) {
        const linha = botao.closest("tr");
        const colunas = linha.querySelectorAll("td");

        const name = colunas[0].textContent.trim();
        const urlAtual = colunas[1].textContent.trim();
        const encurtado = colunas[2].textContent.trim();

        colunas[0].innerHTML = `<input type="text" value="${name}" class="w-full p-1 border rounded" />`;
        colunas[1].innerHTML = `<input type="text" value="${urlAtual}" class="w-full p-1 border rounded" />`;
        colunas[2].innerHTML = `<input type="text" value="${encurtado}" class="w-full p-1 border rounded" />`;
        colunas[4].innerHTML = `
        <button class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600" onclick="salvarEdicao(this)">Salvar</button>
        <button class="bg-gray-400 text-white px-3 py-1 rounded hover:bg-gray-500" onclick="cancelarEdicao(this, '${urlAtual}', '${aliasAtual}')">Cancelar</button>
      `;
      }

      function salvarEdicao(botao) {
        const linha = botao.closest("tr");
        const inputs = linha.querySelectorAll("input");

        const novaURL = inputs[0].value;
        const novoAlias = inputs[1].value;

        linha.cells[0].innerHTML = `<span class='text-blue-600 underline'>${novaURL}</span>`;
        linha.cells[1].innerHTML = novoAlias;
        linha.cells[3].innerHTML = `
        <button class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500" onclick="editarLinha(this)">Editar</button>
        <button class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Excluir</button>
      `;
      }

      function cancelarEdicao(botao, url, alias) {
        const linha = botao.closest("tr");

        linha.cells[0].innerHTML = `<span class='text-blue-600 underline'>${url}</span>`;
        linha.cells[1].innerHTML = alias;
        linha.cells[3].innerHTML = `
        <button class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500" onclick="editarLinha(this)">Editar</button>
        <button class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Excluir</button>
      `;
      }
    </script>
  </body>
  
</html>
